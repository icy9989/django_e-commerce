{% extends 'ecom/homebase.html' %}
{% load static %}
{% block content %}
<head>
  <!-- bootstrap css1 js2 -->
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>

   <!-- jquery -->
   <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js" integrity="sha512-aVKKRRi/Q/YV+4mjoKBsE4x3H+BkegoM/em46NNlCqNTmUYADjBbeNefNxYV7giUp0VxICtqdrbqU7iVaeZNXA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>
<style>
/*START PRODUCT SECTION*/
.title {
  color: aliceblue;
  background-color: orange;
  letter-spacing: 0.4px;
  border: none;
  border-radius: 5px;
  padding: 5px 10px;
  display: inline-block;
}

.cards {
  padding: 10px 20px;
  margin: 20px 10px;
  border-radius: 10px; 
  transition: all 0.3s;
}

.cards:hover {
  box-shadow: 3px 3px 10px rgba(215, 210, 210, 0.5), -3px -3px 10px rgba(215, 210, 210, 0.5);
}

.card-imgs {
  display: flex;
  justify-content: center;
  align-items: center;
}

.description-boxes {
  height: 90px;
}

.product-imgs {
  object-fit: cover;
}

.services-boxes {
  background-color: #f4f4f4;
}

.btn-orange {
  background-color: orange;
  color: white;
}

.banner-1 {
   -webkit-transform: scaleX(-1);
    transform: scaleX(-1);
}

.text-orange {
  color: orange;
}

.size-boxes {
  height: 100px;
}

/*END PRODUCT SECTION*/
</style>

 <!--start banner-->
 <section id="corporation" class="px-5">
  <div class="container-fluid">

    <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
      <ol class="carousel-indicators">
        <li data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="bg-danger active"></li>
        <li data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1" class="bg-danger"></li>
        <li data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2" class="bg-danger"></li>
      </ol>

      <div class="carousel-inner">
        <div class="carousel-item active carouselitems">
          <img src="../../static/images/banner/banner1.webp" class="carouselimgs banner-1" alt="banner1"/>
          <div class="carouseltexts">
            <h3 class="text-danger mb-3">New Item</h3>
            <div class="banner-text-div">
              <h1 class="fw-bold text-white text-uppercase">Protection Cases For iphone</h1>
            </div>
            <h3 class="text-secondary">starting at<span class="h5 fw-bold"> 5000 MMK</span></h3>
          </div>
        </div>

        <div class="carousel-item carouselitems">
          <img src="../../static/images/banner/banner2.png" class="carouselimgs" alt="banner2"/>
          <div class="carouseltexts">
            <h3 class="text-warning mb-3">Best Selling Item</h3>
            <div class="banner-text-div">
              <h1 class="fw-bold text-white text-uppercase">ADIDAS SUPERSTAR SS 2022</h1>
            </div>
            <h3 class="text-secondary">starting at <span class="h5 fw-bold"> 50000 MMK</span></h3>
          </div>
        </div>

        <div class="carousel-item carouselitems">
          <img src="../../static/images/banner/banner3.jpg" class="carouselimgs" alt="banner3"/>
          <div class="carouseltexts">
            <h3 class="text-orange mb-3">Trending Item</h3>
            <div class="banner-text-div">
              <h1 class="fw-bold text-muted">WOMEN'S LATEST FASHION SALE</h1>
            </div>
            <h3 class="text-secondary">starting at <span class="h5 fw-bold"> 10000 MMK</span></h3>
          </div>
        </div>
      </div>

    </div>

  </div>
</section>
<!-- end banner -->

<!-- Start Feature Section  -->
<div class="p-5">
  <div class="row">
    <div class="col-lg-3 col-sm-6">
      <div class="services-boxes p-4 m-2 d-flex justify-content-center align-items-center">
        <img src="../../static/images/feature/service-icon-1.svg" width="50px" />
        <h5 class="px-3">Free Shipping</h5>
      </div>    
    </div>
    <div class="col-lg-3 col-sm-6">
      <div class="services-boxes p-4 m-2 d-flex justify-content-center align-items-center">
        <img src="../../static/images/feature/service-icon-2.svg" width="50px" />
        <h5 class="px-3">Easy Returns</h5>
      </div>    
    </div>
    <div class="col-lg-3 col-sm-6">
      <div class="services-boxes p-4 m-2 d-flex justify-content-center align-items-center">
        <img src="../../static/images/feature/service-icon-3.svg" width="50px" />
        <h5 class="px-3">Secure Payment</h5>
      </div>    
    </div>
    <div class="col-lg-3 col-sm-6">
      <div class="services-boxes p-4 m-2 d-flex justify-content-center align-items-center">
        <img src="../../static/images/feature/service-icon-4.svg" width="40px" />
        <h5 class="px-3">Special Support</h5>
      </div>    
    </div>
  </div>
</div>
<!-- End Feature Section  -->

<!-- Start Product Section -->
<section class="p-4">
  <div class="d-flex justify-content-center">
    <h5 class="text-center title main-titles">Products</h5>
  </div>  
  {%if products%}
  <div class="row px-4">
    {% for p in products %}
    <div class="col-xl-3 col-lg-4 col-sm-6 product-cards">
      <div class="card cards">
        <div class="card-imgs">
          <img src="{% static p.product_image.url %}" alt="product" class="product-imgs" width="250px" height="250px">
        </div>
        <div class="card-bodys my-3">
          <div class="description-boxes">
            <h6 class="text-danger text-uppercase names">{{p.name}}</h6>
            <p class="text-secondary descriptions">{{p.description}}</p>
          </div>
          <div class="size-boxes">
          <p>Product Instock : <span class="badge bg-danger quantitys">{{p.quantity}}</span></p>
          {% if p.size_variant.count %}
            <div class="form-group col-md">
              <label class="text-warning fw-bold">Select size:</label>
              <div class="mt-1">
                    {% for size in p.size_variant.all %}
                      <label class="custom-control custom-radio custom-control-inline px-3">
                        <input type="radio" name="select_size" onchange="get_selected_size('{{size.size_name}}')" value="{{size.size_name}}" checked="" class="custom-control-input">
                        <div class="custom-control-label">{{size.size_name}}</div>
                      </label>
                    {% endfor %}
              </div>     
            </div>
            {% endif %} 
            <input type="hidden" class="hide-values" />
          </div>
          <div class="d-flex justify-content-between align-items-center mt-5">
            <h5 class="prices">{{p.price}} MMK</h5>
            <input type="hidden" class="click-carts" value="{% url 'add-to-cart' p.id  %}" />
            <!-- <a href="{% url 'add-to-cart' p.id  %}" class="btn"><i class="fas fa-shopping-cart text-orange"></i></a> -->
          </div>
        </div>
      </div>
    </div>
    {% endfor %}   
  </div>
  {%else%}
  <div class="container text-center p-5 my-5">
    <img src="../../static/images/icon/no-product.png" width="200px" alt="no-product" />
    <h5 class="text-orange">No Product Found</h5>
  </div>
  {%endif%}   
  
</section>
<!-- End Product Section -->



<script>
const navs = document.querySelectorAll('.navs');
const category = document.querySelector('.main-titles');

navs.forEach(nav=> {
  nav.addEventListener('click',()=>{
    console.log(nav.textContent);
    category.textContent = nav.textContent;
    console.log(category.textContent);
  })
})

$(document).ready(function() {
  // $("input:radio").attr("checked", false);
  // s = $('input[name="selected"]').val();
  // console.log(s);
  function get_selected_size(size) {
    get_size = size;
    localStorage.setItem('clicksize',get_size);
    $('.hide-values').val(get_size);
  }
 
  $('.cards').each(function(i, obj) {
  
    $(this).click(function(e) {
      var name = $(this).closest('.product-cards').find('.names').text();
      var description = $(this).closest('.product-cards').find('.descriptions').text();
      var price = $(this).closest('.product-cards').find('.prices').text();
      var quantity = $(this).closest('.product-cards').find('.quantitys').text();
      var image = $(this).closest('.product-cards').find('.product-imgs').attr('src');
      // var cartbtn = $(this).closest('.product-cards').find('.btn').attr('href');
      var cartbtn = $(this).closest('.product-cards').find('.click-carts').val();
      // if ($(this).closest('.product-cards').find('input[name="select_size"]').attr('checked')) {
      //   size = $(this).closest('.product-cards').find('input[name="select_size"]:checked').val();
      //   $("input:radio").attr("checked", false);
      // } else {
      //   size = "";
      // }

      size = $(this).closest('.product-cards').find('input[name="select_size"]:checked').val()
      // if($(this).closest('.product-cards').find('input[name="select_size"]:checked').val() == "on") {
      //   $(this).closest('.product-cards').find('input[name="select_size"]:checked')
      //   size = $(this).closest('.product-cards').find('.hide-values').val();
      // } else {
      //   size = "";
      // }

      product = {
        'name':name,
        'description':description,
        'price':price,
        'image':image,
        'quantity':quantity,
        'cartbtn':cartbtn,
        'size':size
      }

      localStorage.setItem('product', JSON.stringify(product));
      window.location.href = "/product-detail";
    })
    
});
  
});


</script>

<br/><br/><br/><br/><br/><br/>
{% endblock content %}
